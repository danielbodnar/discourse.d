{
  "name": "Discourse Nix Development",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "features": {
    "ghcr.io/devcontainers/features/nix:1": {
      "extraNixConfig": "experimental-features = nix-command flakes"
    }
  },
  "mounts": [
    "source=${localEnv:HOME}/.nixconfig,target=/root/.nixconfig,type=bind,consistency=cached"
  ],
  "remoteUser": "vscode",
  "settings": {
    "terminal.integrated.defaultProfile.linux": "bash",
    "ruby.useBundler": true,
    "ruby.useLanguageServer": true,
    "ruby.lint": {
      "rubocop": true
    }
  },
  "extensions": [
    "rebornix.ruby",
    "castwide.solargraph",
    "jnoortheen.nix-ide",
    "arrterian.nix-env-selector"
  ],
  "postCreateCommand": "nix develop"
}
